# 职责链模式

## 定义

客户端发出一个请求，**链上的对象都有机会来处理这一请求**

而客户端不需要知道谁是具体的处理对象

这样就实现了请求者和接受者之间的解耦，并且在客户端可以实现动态的组合职责链

使编程更有灵活性

使多个对象都有机会处理请求，从而避免了请求的发送者和接受者之间的耦合关系

将这些对象连成一条链，并沿着这条链传递该请求，直到有对象处理它为止

其过程实际上是一个**递归调用**

### 要点主要是

1. 有多个对象共同对一个任务进行处理
2. 这些对象使用链式存储结构，形成一个链，每个对象知道自己的下一个对象
3. 一个对象对任务进行处理，可以添加一些操作后将对象传递个下一个任务
   
    也可以在此对象上结束任务的处理，并结束任务
    
4. 客户端负责组装链式结构，但是客户端不需要关心最终是谁来处理了任务

## 优缺点

### 优点

- 职责链模式的最主要功能就是：动态组合，请求者和接受者解耦
- 请求者和接受者松散耦合：请求者不需要知道接受者，也不需要知道如何处理。每个职责对象只负责自己的职责范围，其他的交给后继者。各个组件间完全解耦
- 动态组合职责：职责链模式会把功能分散到单独的职责对象中，然后在使用时动态的组合形成链，从而可以灵活的分配职责对象，也可以灵活的添加改变对象职责

### 缺点

- 产生很多细粒度的对象
  
    因为功能处理都分散到了单独的职责对象中，每个对象功能单一，
    
    要把整个流程处理完，需要很多的职责对象，会产生大量的细粒度职责对象
    
- **不一定能处理**
  
    每个职责对象都只负责自己的部分，这样就可以出现某个请求，
    
    即使把整个链走完，都没有职责对象处理它。这就需要提供默认处理，并且注意构造链的有效性

## 使用场景

1. 如果有多个对象可以处理同一个请求，但是具体由哪个对象处理是由运行时刻动态决定的，这种对象就可以使用职责链模式，把处理请求的对象实现成职责对象，然后构造链，当请求在这个链中传递的时候，会根据运行状态判断
2. 在请求处理者不明确的情况下向多个对象中的一个提交请求
3. 需要动态指定处理一个请求的对象集合
